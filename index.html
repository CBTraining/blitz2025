<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chromebook Certifications</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    @font-face {
      font-family: 'Google Sans', sans-serif;
      src: url('GoogleSans-Regular.ttf') format('truetype');
      font-weight: 400;
      font-style: normal;
      font-display: swap;
    }

    #content {
      height: 50vh;
      padding-top: 100vh;
      background-color: #fdfdfd;
      text-align: center;
    }

    #sticky-header {
      position: static;
      top: 0;
      left: 0;
      width: 100%;
      z-index: 900;
      background-color: #fdfdfd;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      padding: 1rem 0 0 0;
    }

    .header-video-background {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 60%;
      z-index: -2;
      object-fit: cover;
      opacity: 0.8;
      display: block;
    }

    .header-logo {
      display: block;
      margin: 0 auto;
      max-width: 500px;
      /* REDUCED VERTICAL SPACE */
      padding-top: 1.8rem;
      padding-bottom: 1.5rem;
      z-index: 901;
      transform: translateY(0);
    }

    body {
      font-family: 'Google Sans', sans-serif;
      background-color: #fdfdfd;
    }

    h1#page-title {
      font-weight: 700;
      color: #202124;
      font-size: 3.75rem;
      line-height: 1;
    }

    @media (min-width: 768px) {
      h1#page-title {
        font-size: 4.5rem;
        line-height: 1;
      }
    }

    p#page-subtitle {
      font-weight: 400;
      color: #4a5568;
      font-size: 1.5rem;
      line-height: 2rem;
    }

    @media (min-width: 768px) {
      p#page-subtitle {
        font-size: 1.875rem;
        line-height: 2.25rem;
      }
    }

    #hero-image {
      max-width: 56rem;
    }

    header#page-content-header {
      margin-bottom: 2.5rem;
      padding-top: 2rem;
    }

    @media (min-width: 768px) {
      header#page-content-header {
        margin-bottom: 3rem;
        padding-top: 3rem;
      }
    }

    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    header#page-content-header #page-title,
    header#page-content-header #page-subtitle,
    header#page-content-header #hero-image {
      animation: fadeInUp 0.6s ease-out forwards;
      opacity: 0;
    }

    header#page-content-header #page-subtitle {
      animation-delay: 0.1s;
    }

    header#page-content-header #hero-image {
      animation-delay: 0.2s;
    }

    #info-section {
      background-color: #fdfdfd;
      border-radius: 1.25rem;
      padding: 1rem;
      margin-bottom: 1.5rem;
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03);
      max-width: 1024px;
      margin-left: auto;
      margin-right: auto;
      display: flex;
      flex-direction: column;
      gap: 1.5rem;
      opacity: 0;
      animation: fadeInUp 0.6s ease-out 0.3s forwards;
      margin: 0 1rem 1.5rem 1rem;
      position: relative;
      z-index: 901;
      /* Ensure this is also above the GIF */
    }

    @media (min-width: 768px) {
      #info-section {
        flex-direction: row;
        align-items: center;
        /* REDUCED VERTICAL SPACE */
        padding: 1.5rem;
        margin: 0 auto 1.5rem auto;
      }
    }

    #info-text-content {
      flex: 1 1 60%;
      color: #3C4043;
    }

    #info-text-content h2 {
      font-size: 1.875rem;
      font-weight: 600;
      margin-bottom: 1.25rem;
      line-height: 1.3;
    }

    #info-text-content p {
      /* REDUCED FONT AND MARGIN */
      font-size: 1rem;
      line-height: 1.5;
      margin-bottom: 0.5rem;
    }

    /* STATS GRADIENT: Targeted the strong tags within the info section for the animation */
    #info-text-content p strong {
      font-weight: 700;
      /* REDUCED FONT SIZE */
      font-size: 2.0rem;
      /* Gradient properties */
      background: linear-gradient(to right, #3185FF, #366CF1, #3185FF);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-size: 200% auto;
      animation: color-cycle 4s linear infinite;

      display: inline-block;
      margin-right: 0.35rem;
      line-height: 1;
      vertical-align: baseline;
    }

    #image-carousel-container {
      flex: 1 1 40%;
      max-width: 300px;
      aspect-ratio: 1 / 1;
      overflow: hidden;
      position: relative;
      border-radius: 0.75rem;
      margin: auto;
      z-index: 901;
    }

    @media (min-width: 768px) {
      #image-carousel-container {
        margin: 0;
        max-width: 320px;
      }
    }

    .carousel-image {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      opacity: 0;
      transition: opacity 1s ease-in-out;
      border-radius: 0.75rem;
    }

    .carousel-image.active {
      opacity: 1;
    }

    .video-item {
      transition: opacity 0.5s ease-in-out, transform 0.5s ease-in-out;
      opacity: 0;
      transform: translateY(10px);
      max-width: 80vw;
      cursor: pointer;
      position: relative;
      overflow: hidden;
      background-color: #ffffff;
      border-radius: 0.5rem;
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    }

    .video-item.visible {
      opacity: 1;
      transform: translateY(0);
    }

    .video-item:hover {
      box-shadow: 0 0 0 6px #4285F4, 0 8px 10px -4px rgba(0, 0, 0, 0.15);
      transform: translateY(-2px);
    }

    #loading-indicator {
      display: none;
      text-align: center;
      padding: 2rem;
      font-style: italic;
      color: #6b7280;
      font-size: 1rem;
    }

    #video-grid {
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 2rem;
      transition: opacity 0.3s ease-in-out;
      padding: 2rem;
    }

    #scrollable-content {
      /* This padding is set by JavaScript to match the height of the fixed header */
      padding: 0;
      margin-top: 0;
    }

    @media (max-width: 768px) {
      #video-grid {
        padding: 0 1rem;
      }
    }

    #video-grid.grid-loading {
      opacity: 0.3;
      pointer-events: none;
    }

    .thumbnail-container {
      display: block;
      aspect-ratio: 14 / 10;
      background-color: #000000;
      overflow: hidden;
      position: relative;
      top: 0px;
      border-top-left-radius: 0.5rem;
      border-top-right-radius: 0.5rem;
      transition: transform 0.3s ease-in-out;
    }

    .video-placeholder {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      /* Transition for image fade out */
      transition: opacity 0.3s ease-in-out;
    }

    .video-placeholder img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }

    .video-item.hovered .video-placeholder {
      opacity: 0;
      pointer-events: none;
    }

    .video-item iframe {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border: none;
      display: block;
      /* Ensure the iframe is visible and on top of the fading placeholder */
      z-index: 2;
      /* ADDED: Allow mouse events to pass through the iframe to the parent div */
      pointer-events: none;
    }

    .video-item:not(.hovered) iframe {
      display: none;
    }

    .overlay-title {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      background-color: #4285F4;
      color: white;
      padding: 0.75rem 1rem;
      opacity: 1;
      transition: opacity 0.3s ease-in-out;
      pointer-events: none;
      font-size: 0.95rem;
      line-height: 1.35;
      font-weight: 400;
      white-space: normal;
      overflow-wrap: break-word;
      max-height: 80%;
      overflow-y: auto;
      border-bottom-left-radius: 0.5rem;
      border-bottom-right-radius: 0.5rem;
      font-size: 0.875rem;
      padding: 0.6rem;
      line-height: 1.25;
      max-height: 75%;
      /* Ensure title is on top of the iframe or placeholder */
      z-index: 3;
    }

    .video-item:hover .thumbnail-container {
      transform: scale(1.03);
    }

    #filter-search-controls {
      display: flex;
      align-items: center;
      /* Center align buttons */
      justify-content: center;
      /* REMOVED: padding, background-color, border-radius, box-shadow */
      padding: 0 1rem;
      background-color: transparent;
      border-radius: 0;
      box-shadow: none;
      /* INCREASED GAP BELOW FILTER BUTTONS */
      margin-bottom: 2.5rem;
      /* ALLOW WRAPPING ON MOBILE */
      flex-wrap: wrap;
      position: relative;
      max-width: 1024px;
      margin-left: auto;
      margin-right: auto;
      /* Changed overflow: hidden to allow search bubble transition */
      overflow: visible;
      z-index: 901;
    }

    @media (max-width: 768px) {
      #filter-search-controls {
        /* INCREASED GAP BELOW FILTER BUTTONS */
        margin: 0 1rem 2.5rem 1rem;
        /* Force buttons to stack on top of search container */
        flex-direction: column;
        justify-content: center;
        align-items: stretch;
      }
    }

    #filter-buttons {
      display: flex;
      /* Center alignment */
      justify-content: center;
      flex-grow: 1;
      /* Allow to fill width */
      /* NEW: Allow filter buttons to wrap to next line on mobile */
      flex-wrap: wrap;
      transition: opacity 0.2s ease-in-out 0.1s;
      /* Added gap between buttons */
      gap: 0.5rem;
      /* ADJUSTED: Reduced padding right to allow search icon closer for desktop space saving */
      padding-right: 0.5rem;
      margin-right: 0;
      min-width: 0;
      opacity: 1;
      position: relative;
      /* Re-added z-index for filter buttons, but ensuring search is higher */
      z-index: 1;
    }

    @media (min-width: 768px) {
      #filter-buttons {
        /* Add some spacing on desktop to visually separate the filter buttons from the search bar */
        margin-right: 1.5rem;
      }
    }

    @media (max-width: 768px) {
      #filter-buttons {
        /* Force buttons to take full width and wrap */
        width: 80%;
        margin-bottom: 1rem;
        padding-right: 0;
        /* No need for padding when search is below */
      }
    }


    .filter-button {
      /* New Blue Rectangle Styling */
      padding: 0.6rem 1.25rem;
      font-size: 1rem;
      border: 1px solid #1a73e8;
      /* Blue border */
      background-color: transparent;
      color: #1a73e8;
      /* Blue text */
      border-radius: 0.5rem;
      /* Rounded rectangle */
      cursor: pointer;
      font-weight: 500;
      transition: all 0.3s ease-in-out;
      /* General transition for smooth effect */
      white-space: nowrap;
      text-align: center;
      flex-shrink: 1;
      /* Allow shrinking */
      /* REMOVED: min-width: 90px; */
      font-family: 'Google Sans', sans-serif;
    }

    .filter-button.active {
      background-color: #1a73e8;
      /* Solid blue background when active */
      color: white;
      /* White text when active */
      font-weight: 600;
      box-shadow: 0 2px 4px rgba(26, 115, 232, 0.4);
    }

    #filter-search-controls:not(.search-active) .filter-button:not(.active):hover {
      background-color: #e8f0fe;
      /* Light blue background on hover */
      color: #1a73e8;
    }

    #search-container {
      display: flex;
      align-items: center;
      flex-shrink: 0;
      justify-content: flex-end;
      min-width: 44px;
      position: relative;
      /* HIGHER Z-INDEX TO BE CLICKABLE */
      z-index: 5;
      /* ADJUSTED margin: Removed default desktop margin to rely on filter-buttons margin-right */
      margin-left: 0;
    }

    @media (max-width: 768px) {
      #search-container {
        width: 100%;
        /* Center the search icon/input */
        justify-content: center;
        /* Vertical spacing from filter buttons above on mobile */
        margin-top: 1rem;
        margin-bottom: 1rem;
        /* Ensure horizontal margin is removed for full width center alignment */
        margin-left: 0;
      }

      #filter-search-controls.search-active #search-input {
        /* Adjust width for mobile when active */
        width: 90vw !important;
        max-width: 300px;
        margin-top: 1rem;
        margin-bottom: 1rem;
        padding: 1rem 1.5rem 1rem 1.5rem;
      }
    }


    #search-icon-button {
      order: 2;
      background: none;
      border: none;
      padding: 0.6rem;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      transition: background-color 0.2s ease-in-out;
      /* Ensures icon is clickable */
      z-index: 6;
      flex-shrink: 0;
    }

    #filter-search-controls:not(.search-active) #search-icon-button:hover {
      background-color: #f1f3f4;
    }

    #search-icon-button svg {
      width: 22px;
      height: 22px;
      fill: #5f6368;
    }

    #search-input {
      font-size: 1.125rem;
      /* ADDED TOP PADDING FOR VISUAL SEPARATION WHEN EXPANDED */
      padding: 1rem 1.5rem 1rem 1.5rem;
      padding-right: 0.5rem;
      order: 1;
      border: none;
      outline: none;
      border-radius: 9999px;
      background-color: transparent;
      width: 0;
      opacity: 0;
      transition: width 0.3s ease-in-out, opacity 0.2s ease-in-out, background-color 0.3s ease-in-out;
      /* Needs lower z-index than button, but high enough to show over other elements when active */
      z-index: 4;
      font-weight: 400;
      color: #3C4043;
      min-width: 0;
      font-family: 'Google Sans', sans-serif;
      height: 100%;
    }

    #search-input::placeholder {
      color: #80868b;
    }

    #filter-search-controls.search-active #filter-buttons {
      opacity: 0.4;
      pointer-events: none;
      /* Disable clicks on filter buttons when search is active */
      transition: opacity 0.15s ease-out;
    }

    #filter-search-controls.search-active #search-input {
      opacity: 1;
      width: 300px;
      margin-top: 1rem;
      background-color: #f1f3f4;
      transition: width 0.3s ease-in-out 0.05s, opacity 0.2s ease-in-out 0.1s, background-color 0.3s ease-in-out 0.05s;
    }

    @media (max-width: 768px) {
      #filter-search-controls.search-active #search-input {
        margin-top: 1rem;
        margin-bottom: 1rem;
      }
    }


    .hidden {
      display: none !important;
    }

    #no-results-message {
      display: none;
      text-align: center;
      padding: 2rem;
      font-style: italic;
      color: #6b7280;
      grid-column: 1 / -1;
      font-size: 1rem;
    }

    #end-of-content-message {
      font-size: 1rem;
      padding: 2rem;
      text-align: center;
      color: #6b7280;
      grid-column: 1 / -1;
      display: none;
    }

    #video-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.9);
      z-index: 1000;
      display: flex;
      flex-direction: column;
      justify-content: center;
      padding: 1rem;
      box-sizing: border-box;
      /* FADE-IN STYLES */
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.3s ease-out, visibility 0.3s ease-out;
    }

    #video-modal.modal-visible {
      opacity: 1;
      visibility: visible;
    }

    #modal-content {
      position: relative;
      width: 95%;
      aspect-ratio: 16 / 9;
      max-width: 1280px;
      overflow: hidden;
      background-color: #000;
      border-radius: 0.5rem;
      margin: 0 auto;
    }

    #video-player-iframe {
      width: 100%;
      height: 100%;
      border: none;
      display: block;
      border-radius: 0.5rem;
    }

    #modal-video-title {
      width: 95%;
      max-width: 1280px;
      margin: 1rem auto 0 auto;
      color: #e5e7eb;
      font-size: 1.1rem;
      font-weight: 500;
      text-align: center;
      padding: 0 1rem;
      box-sizing: border-box;
      line-height: 1.4;
    }

    .modal-button {
      position: absolute;
      color: white;
      border: none;
      background: rgba(60, 60, 60, 0.6);
      padding: 10px;
      cursor: pointer;
      transition: background-color 0.3s ease, opacity 0.3s ease;
      z-index: 1010;
      border-radius: 50%;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .modal-button:hover {
      background-color: rgba(90, 90, 90, 0.8);
    }

    .modal-button:disabled {
      opacity: 0.3;
      cursor: not-allowed;
      background-color: rgba(60, 60, 60, 0.4);
    }

    .modal-button svg {
      width: 24px;
      height: 24px;
      fill: white;
    }

    #prev-video {
      top: 50%;
      left: max(10px, 1%);
      transform: translateY(-50%);
    }

    #next-video {
      top: 50%;
      right: max(10px, 1%);
      transform: translateY(-50%);
    }

    #close-modal {
      top: max(10px, 1%);
      right: max(10px, 1%);
      font-size: 28px;
      width: 40px;
      height: 40px;
      line-height: 1;
    }

    body.modal-open {
      overflow: hidden;
    }

    #scroll-down-button {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      background-color: #1a73e8;
      color: white;
      border: none;
      border-radius: 9999px;
      padding: 0.5rem 1rem;
      font-size: 0.875rem;
      font-weight: 500;
      line-height: 1.25rem;
      display: none;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      z-index: 999;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.3s ease-in-out, visibility 0.3s ease-in-out;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
      white-space: nowrap;
    }

    #scroll-down-button.visible {
      opacity: 1;
      visibility: visible;
    }

    @media (max-width: 768px) {
      #scroll-down-button {
        display: flex;
      }

      #info-text-content h2 {
        text-align: center;
        /* Center align title on mobile */
      }

      #info-text-content strong {
        font-size: 2rem;
        /* Adjusted for mobile */
      }

      .stat-label {
        font-size: 0.85rem;
      }
    }

    @media (max-width: 1023px) {
      #video-modal {
        padding: 0.5rem;
      }

      #modal-content {
        width: 100%;
      }

      #modal-video-title {
        width: 100%;
        font-size: 1rem;
        margin-top: 0.75rem;
      }

      #prev-video {
        left: 5px;
        padding: 8px;
      }

      #next-video {
        right: 5px;
        padding: 8px;
      }

      #close-modal {
        top: 5px;
        right: 5px;
        width: 36px;
        height: 36px;
        font-size: 24px;
      }

      .modal-button svg {
        width: 20px;
        height: 20px;
      }

      #video-grid {
        grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
        gap: 1.3rem;
      }

      h1#page-title {
        font-size: 2.4rem;
      }

      p#page-subtitle {
        font-size: 1.125rem;
      }

      #filter-search-controls {
        max-width: 95%;
        padding: 0.5rem 0.75rem;
        /* INCREASED GAP BELOW FILTER BUTTONS */
        margin-bottom: 2.5rem;
      }

      #filter-buttons {
        justify-content: space-around;
        margin-right: 0.5rem;
        gap: 0.5rem;
        /* Added gap to filter buttons for better mobile spacing */
      }

      /* Mobile filter buttons style (to ensure they shrink gracefully) */
      .filter-button {
        padding: 0.8rem 0.8rem;
        font-size: 0.85rem;
      }


      #search-icon-button svg {
        width: 20px;
        height: 20px;
      }

      #search-input {
        font-size: 0.9rem;
        padding: 0.5rem 0.75rem;
      }

      #filter-search-controls.search-active #search-input {
        width: calc(100% - 44px);
      }

      #hero-image {
        max-width: 90%;
      }

      #info-section {
        padding: 1.5rem;
        margin-bottom: 2rem;
        border-radius: 1rem;
      }

      #info-text-content h2 {
        font-size: 1.5rem;
      }

      #info-text-content p {
        font-size: 1rem;
      }

      #info-text-content p strong {
        font-size: 1.875rem;
      }

      #image-carousel-container {
        max-width: 250px;
      }

      body {
        padding-top: 0px;
      }

      header#page-content-header {
        padding-top: 1.5rem;
      }
    }

    @keyframes color-cycle {
      0% {
        background-position: 0% 50%;
      }

      50% {
        background-position: 100% 50%;
      }

      100% {
        background-position: 0% 50%;
      }
    }

    .light-container {
      position: fixed;
      top: -50px;
      left: 0;
      width: 120vw;
      height: 50px;
      z-index: -5;
    }

    .rainbow-light {
      width: 100%;
      height: 100%;
      border-radius: 0;
      filter: blur(60px);
      opacity: 0.8;
      animation: rainbowCycle 8s infinite linear;
    }

    @keyframes rainbowCycle {
      0% {
        background: #ff0000;
      }

      12.5% {
        background: #ff8000;
      }

      25% {
        background: #ffff00;
      }

      37.5% {
        background: #80ff00;
      }

      50% {
        background: #00ff00;
      }

      62.5% {
        background: #00ff80;
      }

      75% {
        background: #0080ff;
      }

      87.5% {
        background: #8000ff;
      }

      100% {
        background: #ff0000;
      }
    }
  </style>
</head>

<body onresize="calculateStickyHeaderOffset()" onload="calculateStickyHeaderOffset()">

  <div id="sticky-header">
    <video class="header-video-background" autoplay loop muted playsinline src="colorgif1c.mp4" onerror="this.style.display='none';"></video>
    
    <img class="header-logo" src="logo2.png" alt="Blitz Logo">

    <section id="info-section" aria-labelledby="info-heading">
      <div id="info-text-content">
        <h2 id="info-heading"></h2>
        <p><strong class="animated-gradient-text">56%</strong> of Best Buy Stores Visited Nationwide</p>
        <p><strong class="animated-gradient-text">2k+</strong> Best Buy Blue Shirts Trained</p>
        <p><strong class="animated-gradient-text">152%</strong> Increase in Recommendation Rate</p>
      </div>
      <div id="image-carousel-container">
        <img src="gallery1.webp" alt="Gallery image 1" class="carousel-image active" onerror="this.style.display='none'; this.alt='Error loading gallery image 1';">
        <img src="gallery2.webp" alt="Gallery image 2" class="carousel-image" onerror="this.style.display='none'; this.alt='Error loading gallery image 2';">
        <img src="gallery3.webp" alt="Gallery image 3" class="carousel-image" onerror="this.style.display='none'; this.alt='Error loading gallery image 3';">
      </div>
    </section>

    <div id="filter-search-controls">
      <div id="filter-buttons">
        <button class="filter-button active" data-filter="all">All Videos</button>
        <button class="filter-button" data-filter="geminibasic">Basic Gemini</button>
        <button class="filter-button" data-filter="advgemini">Advanced Gemini</button>
        <button class="filter-button" data-filter="gemini">Nano Banana</button>
        <button class="filter-button" data-filter="notebooklm">NotebookLM</button>
        <button class="filter-button" data-filter="veo3">Veo 3</button>
      </div>
      <div id="search-container">
        <input type="search" id="search-input" placeholder="Search videos...">
        <button id="search-icon-button" title="Search">
          <svg viewBox="0 0 24 24">
            <path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path>
          </svg>
        </button>
      </div>
    </div>
  </div>

  <main id="scrollable-content">
    <div id="video-grid" class="grid gap-8"></div>
    <div id="loading-indicator">Loading more videos...</div>
    <div id="no-results-message" style="display: none;">No videos match your filter or search.</div>
    <div id="end-of-content-message" style="display: none;">No more videos to load.</div>
  </main>

  <div id="video-modal">
    <button id="close-modal" class="modal-button" title="Close">&times;</button>
    <div id="modal-content">
      <iframe id="video-player-iframe" src="" allow="autoplay; fullscreen; picture-in-picture" allowfullscreen></iframe>
      <button id="prev-video" class="modal-button" title="Previous Video"><svg viewBox="0 0 20 20">
          <path d="M12.707 14.707a1 1 0 01-1.414 0L7 10.414l4.293-4.293a1 1 0 111.414 1.414L9.414 10l3.293 3.293a1 1 0 010 1.414z"></path>
        </svg></button>
      <button id="next-video" class="modal-button" title="Next Video"><svg viewBox="0 0 20 20">
          <path d="M7.293 14.707a1 1 0 001.414 0L13 10.414 8.707 6.121a1 1 0 00-1.414 1.414L10.586 10l-3.293 3.293a1 1 0 000 1.414z"></path>
        </svg></button>
    </div>
    <div id="modal-video-title"></div>
  </div>

  <button id="scroll-down-button" aria-label="Scroll down to videos">
    See Videos
  </button>

  <script>
    const videoGrid = document.getElementById('video-grid');
    const loadingIndicator = document.getElementById('loading-indicator');
    const endOfContentMessage = document.getElementById('end-of-content-message');
    const noResultsMessage = document.getElementById('no-results-message');
    const videoModal = document.getElementById('video-modal');
    const modalContent = document.getElementById('modal-content');
    const videoPlayerIframe = document.getElementById('video-player-iframe');
    const closeModalButton = document.getElementById('close-modal');
    const prevVideoButton = document.getElementById('prev-video');
    const nextVideoButton = document.getElementById('next-video');
    const filterSearchControls = document.getElementById('filter-search-controls');
    const filterButtons = document.querySelectorAll('.filter-button');
    const searchContainer = document.getElementById('search-container');
    const searchIconButton = document.getElementById('search-icon-button');
    const searchInput = document.getElementById('search-input');
    const carouselContainer = document.getElementById('image-carousel-container');
    const carouselImages = carouselContainer ? carouselContainer.querySelectorAll('.carousel-image') : [];
    const modalVideoTitleElement = document.getElementById('modal-video-title');
    const scrollDownButton = document.getElementById('scroll-down-button');
    const stickyHeader = document.getElementById('sticky-header');
    const scrollableContent = document.getElementById('scrollable-content');

    let currentPage = 1;
    let isLoading = false;
    const videosPerPage = 12;
    let loadedVideos = [];
    let displayedVideos = [];
    let currentVideoIndex = -1;
    let allVideosLoaded = false;
    let currentFilter = 'all';
    let currentSearchTerm = '';
    let isSearchActive = false;
    let currentCarouselIndex = 0;
    let carouselInterval;
    let activeDropdown = null;
    let touchStartX = 0,
      touchStartY = 0,
      touchEndX = 0,
      touchEndY = 0;
    const swipeThreshold = 50;
    const VIMEO_ACCESS_TOKEN = "85f387f5940732ea08308ffef87753bf";
    const VIMEO_USER_ID = "238871639";

    function calculateStickyHeaderOffset() {
      if (!stickyHeader || !scrollableContent) return;
      setTimeout(() => {
        const headerHeight = stickyHeader.offsetHeight;
        // CORRECTED: Calculate based on stickyHeader height to push scrollable content below the fixed header
        scrollableContent.style.paddingTop = `${headerHeight + 8}px`;
        console.log(`Calculated Header Height: ${headerHeight}px. Applied Padding: ${headerHeight + 8}px`);
      }, 50);
    }

    function createVimeoThumbnailEmbed(embedUrl) {
      if (!embedUrl) return null;
      let finalUrl = embedUrl;
      try {
        const url = new URL(embedUrl);
        // Essential parameters for silent autoplay preview
        url.searchParams.set('autoplay', '1');
        url.searchParams.set('muted', '1');
        url.searchParams.set('loop', '1');
        url.searchParams.set('background', '1');
        url.searchParams.set('player_id', '0'); // Needed for some players to work
        finalUrl = url.toString();
      } catch (e) {
        console.warn("Could not parse embed URL for thumbnail, using basic string manipulation:", e);
        // Fallback for non-URL strings
        finalUrl = finalUrl.replace(/([?&])(autoplay|muted|loop|background)=[^&]*&?/g, '$1');
        finalUrl += (finalUrl.includes('?') ? '&' : '?') + 'autoplay=1&muted=1&loop=1&background=1';
        finalUrl = finalUrl.replace(/&$/, '').replace('?&', '?');
      }

      const iframe = document.createElement('iframe');
      iframe.setAttribute('src', finalUrl);
      iframe.setAttribute('allow', 'autoplay; fullscreen; picture-in-picture');
      iframe.setAttribute('allowfullscreen', '');
      iframe.setAttribute('frameborder', '0');
      iframe.style.position = 'absolute';
      iframe.style.top = '0';
      iframe.style.left = '0';
      iframe.style.width = '100%';
      iframe.style.height = '100%';
      iframe.style.opacity = '0'; // Start invisible
      iframe.style.transition = 'opacity 0.3s ease-in-out';

      // Fade in after a small delay to avoid flicker
      setTimeout(() => {
        iframe.style.opacity = '1';
      }, 50);

      return iframe;
    }

    function isTouchDevice() {
        return ('ontouchstart' in window) || (navigator.maxTouchPoints > 0) || (navigator.msMaxTouchPoints > 0);
    }
    
    // RE-ENABLED HOVER LOGIC FOR ALL DEVICES (since user wants the preview)
    function handleVideoItemHover(event) {
        const videoItem = event.currentTarget;
        const indexInDisplayed = parseInt(videoItem.dataset.index);
        const videoData = displayedVideos[indexInDisplayed];
        const thumbnailContainer = videoItem.querySelector('.thumbnail-container');

        if (!videoData || !thumbnailContainer || !videoData.embedUrl) return;

        if (event.type === 'mouseenter') {
            videoItem.classList.add('hovered');
            thumbnailContainer.querySelector('iframe')?.remove();

            const iframe = createVimeoThumbnailEmbed(videoData.embedUrl);
            if (iframe) {
                thumbnailContainer.appendChild(iframe);
            }
        } else if (event.type === 'mouseleave') {
            videoItem.classList.remove('hovered');
            const iframe = thumbnailContainer.querySelector('iframe');
            if (iframe) {
                iframe.style.opacity = '0';
                setTimeout(() => {
                    iframe.remove();
                }, 300);
            }
        }
    }


    window.addEventListener('resize', calculateStickyHeaderOffset);

    async function fetchVideos(page, limit) {
      console.log(`FETCHING directly from Vimeo: page ${page}, limit ${limit}`);
      if (!VIMEO_ACCESS_TOKEN || VIMEO_ACCESS_TOKEN === "YOUR_VIMEO_API_TOKEN_HERE" || !VIMEO_USER_ID || VIMEO_USER_ID === "YOUR_VIMEO_USER_ID_HERE") {
        console.error("Vimeo API Token or User ID is missing or still set to placeholder value in the script.");
        loadingIndicator.textContent = 'Error: Vimeo credentials missing in script.';
        noResultsMessage.textContent = 'Vimeo credentials not configured in the HTML script for testing.';
        noResultsMessage.style.display = 'block';
        allVideosLoaded = true;
        return [];
      }
      const VIMEO_API_BASE_URL = 'https://api.vimeo.com';
      // UPDATED: Added privacy.embed field to the request
      let apiUrl = `${VIMEO_API_BASE_URL}/users/${VIMEO_USER_ID}/videos?page=${page}&per_page=${limit}&fields=uri,name,description,link,player_embed_url,pictures.base_link,tags,privacy.embed&sort=date&direction=desc`;
      console.log("Calling Vimeo API URL:", apiUrl);
      try {
        const response = await fetch(apiUrl, {
          method: 'GET',
          headers: {
            'Authorization': `Bearer ${VIMEO_ACCESS_TOKEN}`,
            'Content-Type': 'application/json',
            'Accept': 'application/vnd.vimeo.*+json;version=3.4'
          },
        });
        if (!response.ok) {
          let errorMsg = `Vimeo API request failed: ${response.status}`;
          try {
            const errorData = await response.json();
            console.error('Vimeo API Error Response:', errorData);
            errorMsg += ` - ${errorData.error || errorData.developer_message || errorData.message || 'Unknown error'}`;
          } catch (e) {}
          throw new Error(errorMsg);
        }
        const vimeoData = await response.json();

        // Filter out videos that cannot be embedded
        const embeddableVideos = vimeoData.data.filter(video => {
          const embedPrivacy = video.privacy?.embed;
          // We only want 'public' (globally embeddable) or 'embed' (custom embedding rules, which we assume are permissive for this purpose).
          return embedPrivacy === 'public' || embedPrivacy === 'embed';
        });

        const videos = embeddableVideos.map(video => {
          let videoTitle = video.name ? video.name.toLowerCase() : '';
          let category = 'other';

          /* --- START: UPDATED CATEGORY LOGIC --- */
          if (videoTitle.includes('notebooklm')) {
            category = 'notebooklm';
          } else if (videoTitle.includes('basic gemini')) {
            category = 'geminibasic';
          } else if (videoTitle.includes('advanced gemini') || videoTitle.includes('adv gemini')) {
            category = 'advgemini';
          } else if (videoTitle.includes('nano banana')) {
            category = 'gemini'; // Set to 'gemini' to match the filter button 'Nano Banana' data-filter
          } else if (videoTitle.includes('veo 3') || videoTitle.includes('veo3')) {
            category = 'veo3';
          } else if (videoTitle.includes('gemini')) {
            category = 'gemini';
          }
          /* --- END: UPDATED CATEGORY LOGIC --- */

          return {
            title: video.name || 'Untitled Video',
            embedUrl: video.player_embed_url || video.link,
            thumbnail: video.pictures?.base_link ? `${video.pictures.base_link}_640x360?r=pad` : null,
            description: video.description,
            tags: video.tags?.map(tag => tag.name) || [],
            category: category,
            embeddable: true // Flag as embeddable after filtering
          };
        });
        console.log(`Received ${vimeoData.data.length} raw videos. Filtered down to ${videos.length} embeddable videos.`);
        return videos;
      } catch (error) {
        console.error("Error fetching videos directly from Vimeo:", error);
        loadingIndicator.textContent = 'Error loading videos.';
        noResultsMessage.textContent = `Failed to load videos: ${error.message}`;
        noResultsMessage.style.display = 'block';
        allVideosLoaded = true;
        return [];
      }
    }
    function createVideoElement(video, indexInDisplayed) {
      const div = document.createElement('div');
      div.className = 'video-item';
      div.dataset.index = indexInDisplayed;
      if (video.category) {
        div.dataset.category = video.category;
      }
      const placeholderErrorUrl = `https://placehold.co/640x360/cccccc/ffffff?text=Error+Loading`;
      const thumbnailUrl = video.thumbnail || placeholderErrorUrl;
      const title = video.title || 'Video Title';

      // UPDATED HTML STRUCTURE FOR HOVER AUTOPLAY
      div.innerHTML = `
                <div class="thumbnail-container">
                    <div class="video-placeholder">
                        <img src="${thumbnailUrl}" alt="${title}" onerror="this.onerror=null; this.src='${placeholderErrorUrl}';" loading="lazy">
                    </div>
                    <h3 class="overlay-title" title="${title}">${title}</h3>
                </div>
            `;

      // Simplified: Click listener attached directly to the video-item
      div.addEventListener('click', () => {
          // 1. Force cleanup of the hover state iframe if it exists (resolves desktop click conflict)
          const iframe = div.querySelector('iframe');
          if (iframe) {
              iframe.remove();
              div.classList.remove('hovered');
          }
          // 2. Open the modal
          openModal(indexInDisplayed);
      });

      // RE-ATTACH HOVER LISTENERS FOR PREVIEW
      div.addEventListener('mouseenter', handleVideoItemHover);
      div.addEventListener('mouseleave', handleVideoItemHover);

      requestAnimationFrame(() => {
        div.classList.add('visible');
      });
      return div;
    }
    function showEndOfContent(isFilterOrSearch = false) {
      loadingIndicator.style.display = 'none';
      const hasVisibleItems = displayedVideos.length > 0;
      if ((isFilterOrSearch || currentSearchTerm) && !hasVisibleItems) {
        noResultsMessage.style.display = 'block';
        noResultsMessage.textContent = 'No videos match your filter or search.';
        endOfContentMessage.style.display = 'none';
      } else if (hasVisibleItems && allVideosLoaded) {
        noResultsMessage.style.display = 'none';
        endOfContentMessage.style.display = 'block';
      } else if (!hasVisibleItems && allVideosLoaded) {
        if (!noResultsMessage.textContent.startsWith('Failed to load videos') && !noResultsMessage.textContent.startsWith('Vimeo credentials not configured')) {
          noResultsMessage.style.display = 'block';
          noResultsMessage.textContent = 'No videos available for the current filter/search.';
          endOfContentMessage.style.display = 'none';
        }
      } else {
        noResultsMessage.style.display = 'none';
        endOfContentMessage.style.display = 'none';
      }
    }
    function checkAndLoadIfContentNotFillingViewport() {
      setTimeout(() => {
        if (!isLoading && !allVideosLoaded && videoModal.classList.contains('modal-visible') === false) {
          const contentHeight = document.body.offsetHeight;
          const viewportHeight = window.innerHeight;
          if (contentHeight <= viewportHeight && displayedVideos.length < videosPerPage * 2) {
            console.log("Content doesn't fill viewport, loading more...");
            loadMoreVideos();
          }
        }
      }, 300);
    }
    function filterVideos(videosToFilter) {
      const lowerSearchTerm = currentSearchTerm.toLowerCase();
      return videosToFilter.filter(video => {
        let categoryMatch = (currentFilter === 'all') || (video.category === currentFilter);
        if (!categoryMatch) return false;
        return !lowerSearchTerm || video.title.toLowerCase().includes(lowerSearchTerm);
      });
    }
    async function loadMoreVideos() {
      if (isLoading || allVideosLoaded) return;
      isLoading = true;
      loadingIndicator.style.display = 'block';
      noResultsMessage.style.display = 'none';
      endOfContentMessage.style.display = 'none';
      loadingIndicator.textContent = 'Loading more videos...';
      try {
        const rawNewVideos = await fetchVideos(currentPage, videosPerPage);
        if (rawNewVideos && rawNewVideos.length > 0) {
          loadedVideos.push(...rawNewVideos);
          const filteredNewVideos = filterVideos(rawNewVideos);
          if (filteredNewVideos.length > 0) {
            filteredNewVideos.forEach(video => {
              displayedVideos.push(video);
              const indexInDisplayed = displayedVideos.length - 1;
              const videoElement = createVideoElement(video, indexInDisplayed);
              videoGrid.appendChild(videoElement);
            });
          } else {
            console.log("Fetched videos, but none matched current filter/search.");
            if (rawNewVideos.length === videosPerPage && !allVideosLoaded) {
              console.log("Trying next page automatically...");
              currentPage++;
              isLoading = false;
              loadMoreVideos();
              return;
            }
          }
          currentPage++;
          if (rawNewVideos.length < videosPerPage) {
            console.log("Received fewer videos than requested from API, assuming end of API content.");
            allVideosLoaded = true;
            showEndOfContent(currentFilter !== 'all' || currentSearchTerm !== '');
          } else {
            allVideosLoaded = false;
          }
        } else {
          console.log("No more videos returned from API.");
          allVideosLoaded = true;
          showEndOfContent(currentFilter !== 'all' || currentSearchTerm !== '');
        }
      } catch (error) {
        console.error("Error in loadMoreVideos flow:", error);
        allVideosLoaded = true;
        loadingIndicator.style.display = 'none';
      } finally {
        if (isLoading) {
          isLoading = false;
          if (!allVideosLoaded && loadingIndicator.textContent === 'Loading more videos...') {
            loadingIndicator.style.display = 'none';
          }
          if (!allVideosLoaded) {
            checkAndLoadIfContentNotFillingViewport();
          }
        }
      }
    }
    function resetAndLoad() {
      console.log(`Resetting grid. Filter: ${currentFilter}, Search: ${currentSearchTerm}`);
      videoGrid.classList.add('grid-loading');
      loadedVideos = [];
      displayedVideos = [];
      currentPage = 1;
      allVideosLoaded = false;
      currentVideoIndex = -1;
      noResultsMessage.style.display = 'none';
      endOfContentMessage.style.display = 'none';
      loadingIndicator.style.display = 'none';
      loadingIndicator.textContent = 'Loading more videos...';
      noResultsMessage.textContent = 'No videos match your filter or search.';
      setTimeout(() => {
        videoGrid.innerHTML = '';
        videoGrid.classList.remove('grid-loading');
        loadMoreVideos();
      }, 300);
    }
    function closeSearchUI() {
      if (!isSearchActive) return;
      isSearchActive = false;
      filterSearchControls.classList.remove('search-active');
      filterButtons.forEach(btn => btn.classList.toggle('active', btn.dataset.filter === currentFilter));
      console.log("Search UI closed visually.");
    }
    function closeSearchUIAndReset() {
      const wasSearching = currentSearchTerm !== '';
      closeSearchUI();
      if (wasSearching) {
        currentSearchTerm = '';
        searchInput.value = '';
        console.log("Search term cleared, reloading grid.");
        resetAndLoad();
      }
    }
    filterButtons.forEach(button => {
      button.addEventListener('click', () => {
        const newFilter = button.dataset.filter;
        let needsReload = false;
        if (isSearchActive) {
          closeSearchUI();
          currentSearchTerm = '';
          searchInput.value = '';
          needsReload = true;
        }
        if (newFilter !== currentFilter) {
          filterButtons.forEach(btn => btn.classList.remove('active'));
          button.classList.add('active');
          currentFilter = newFilter;
          needsReload = true;
          console.log(`Filter changed to: ${currentFilter}`);
        }
        if (needsReload) {
          resetAndLoad();
        }
      });
    });
    searchIconButton.addEventListener('click', () => {
      if (isSearchActive) {
        if (searchInput.value === '') {
          closeSearchUI();
        } else {
          closeSearchUIAndReset();
        }
      } else {
        isSearchActive = true;
        filterSearchControls.classList.add('search-active');
        searchInput.focus();
        console.log("Search UI opened.");
      }
    });
    let searchDebounceTimer;
    searchInput.addEventListener('input', () => {
      clearTimeout(searchDebounceTimer);
      searchDebounceTimer = setTimeout(() => {
        const newSearchTerm = searchInput.value.trim();
        if (newSearchTerm !== currentSearchTerm) {
          console.log(`Search term changed to: "${newSearchTerm}"`);
          currentSearchTerm = newSearchTerm;
          if (!isSearchActive && newSearchTerm) {
            isSearchActive = true;
            filterSearchControls.classList.add('search-active');
          }
          if (currentFilter !== 'all') {
            filterButtons.forEach(btn => btn.classList.toggle('active', btn.dataset.filter === 'all'));
          }
          resetAndLoad();
        }
      }, 300);
    });
    searchInput.addEventListener('keydown', (event) => {
      if (event.key === 'Escape' && isSearchActive) {
        event.preventDefault();
        closeSearchUIAndReset();
      }
    });
    function openModal(indexInDisplayed) {
      if (typeof indexInDisplayed !== 'number' || indexInDisplayed < 0 || indexInDisplayed >= displayedVideos.length) {
        console.error("Invalid index for openModal:", indexInDisplayed);
        return;
      }
      const videoData = displayedVideos[indexInDisplayed];
      if (!videoData || !videoData.embedUrl) {
        console.error("Missing video data or embedUrl for index:", indexInDisplayed);
        return;
      }
      document.body.classList.add('modal-open');
      videoModal.style.display = 'flex'; // Set display to enable transition
      // Use requestAnimationFrame to ensure the modal is rendered before applying the class
      requestAnimationFrame(() => {
        videoModal.classList.add('modal-visible');
      });
      showVideoInModal(videoData.embedUrl, indexInDisplayed, videoData.title);
      window.addEventListener('keydown', handleKeyboardNav);
      videoModal.addEventListener('touchstart', handleTouchStart, {
        passive: true
      });
      videoModal.addEventListener('touchmove', handleTouchMove, {
        passive: false
      });
      videoModal.addEventListener('touchend', handleTouchEnd);
    }
    function closeModal() {
      // Start fade out transition
      videoModal.classList.remove('modal-visible');
      document.body.classList.remove('modal-open');

      // Wait for the transition to finish before hiding
      setTimeout(() => {
        videoModal.style.display = 'none';
        videoPlayerIframe.src = '';
        if (modalVideoTitleElement) {
          modalVideoTitleElement.textContent = '';
        }
      }, 300); // Must match CSS transition duration

      currentVideoIndex = -1;
      if (document.fullscreenElement) {
        document.exitFullscreen().catch(err => console.error("Error exiting fullscreen:", err));
      }
      window.removeEventListener('keydown', handleKeyboardNav);
      videoModal.removeEventListener('touchstart', handleTouchStart);
      videoModal.removeEventListener('touchmove', handleTouchMove);
      videoModal.removeEventListener('touchend', handleTouchEnd);
      checkAndLoadIfContentNotFillingViewport();
    }
    function showVideoInModal(embedUrl, indexInDisplayed, title = 'Video') {
      if (typeof indexInDisplayed !== 'number' || indexInDisplayed < 0 || indexInDisplayed >= displayedVideos.length) return;
      currentVideoIndex = indexInDisplayed;
      if (modalVideoTitleElement) {
        modalVideoTitleElement.textContent = title;
      }
      let finalUrl = embedUrl;
      try {
        const url = new URL(embedUrl);
        url.searchParams.set('autoplay', '1');
        url.searchParams.delete('muted');
        finalUrl = url.toString();
      } catch (e) {
        console.warn("Could not parse embed URL, using basic string manipulation:", e);
        if (finalUrl.includes('?')) {
          finalUrl = finalUrl.replace(/([?&])(autoplay|muted)=[^&]*&?/g, '$1');
          finalUrl += (finalUrl.includes('?') ? '&' : '?') + 'autoplay=1';
        } else {
          finalUrl += '?autoplay=1';
        }
        finalUrl = finalUrl.replace(/&$/, '').replace('?&', '?');
      }
      console.log("Setting iframe src (attempting autoplay):", finalUrl);
      videoPlayerIframe.src = finalUrl;
      updateModalNavButtons();
    }
    function updateModalNavButtons() {
      if (displayedVideos.length === 0) {
        prevVideoButton.disabled = true;
        nextVideoButton.disabled = true;
        return;
      }
      prevVideoButton.disabled = currentVideoIndex <= 0;
      nextVideoButton.disabled = currentVideoIndex >= displayedVideos.length - 1;
    }
    function showNextVideo() {
      if (!nextVideoButton.disabled && currentVideoIndex < displayedVideos.length - 1) {
        const nextIndex = currentVideoIndex + 1;
        const nextVideo = displayedVideos[nextIndex];
        if (nextVideo?.embedUrl) {
          showVideoInModal(nextVideo.embedUrl, nextIndex, nextVideo.title);
        } else {
          console.error("Missing embedUrl for next video at index:", nextIndex);
        }
      }
    }
    function showPreviousVideo() {
      if (!prevVideoButton.disabled && currentVideoIndex > 0) {
        const prevIndex = currentVideoIndex - 1;
        const prevVideo = displayedVideos[prevIndex];
        if (prevVideo?.embedUrl) {
          showVideoInModal(prevVideo.embedUrl, prevIndex, prevVideo.title);
        } else {
          console.error("Missing embedUrl for previous video at index:", prevIndex);
        }
      }
    }
    function handleKeyboardNav(event) {
      if (videoModal.classList.contains('modal-visible') === false) return;
      if (event.key === 'ArrowRight') {
        event.preventDefault();
        showNextVideo();
      } else if (event.key === 'ArrowLeft') {
        event.preventDefault();
        showPreviousVideo();
      } else if (event.key === 'Escape') {
        event.preventDefault();
        closeModal();
      }
    }
    function handleTouchStart(event) {
      const firstTouch = event.touches[0];
      touchStartX = firstTouch.clientX;
      touchStartY = firstTouch.clientY;
      touchEndX = touchStartX;
      touchEndY = touchStartY;
    }
    function handleTouchMove(event) {
      if (event.touches.length === 1) {
        const firstTouch = event.touches[0];
        touchEndX = firstTouch.clientX;
        touchEndY = firstTouch.clientY;
        if (touchStartX !== 0) {
          let deltaX = Math.abs(touchEndX - touchStartX);
          let deltaY = Math.abs(touchEndY - touchStartY);
          if (deltaX > deltaY + 5) {
            event.preventDefault();
          }
        }
      }
    }
    function handleTouchEnd(event) {
      if (touchStartX === 0 || touchEndX === 0) return;
      let deltaX = touchEndX - touchStartX;
      let deltaY = touchEndY - touchStartY;
      if (Math.abs(deltaX) > Math.abs(deltaY) && Math.abs(deltaX) > swipeThreshold) {
        if (deltaX < 0) {
          if (!nextVideoButton.disabled) showNextVideo();
        } else {
          if (!prevVideoButton.disabled) showPreviousVideo();
        }
      }
      touchStartX = 0;
      touchStartY = 0;
      touchEndX = 0;
      touchEndY = 0;
    }
    function handleScroll() {
      if (videoModal.classList.contains('modal-visible') || isLoading || allVideosLoaded) return;
      const scrollCheckHeight = document.documentElement.scrollHeight;
      const scrollBuffer = 250;
      if ((window.innerHeight + window.scrollY) >= scrollCheckHeight - scrollBuffer) {
        loadMoreVideos();
      }
    }
    function startCarousel() {
      if (!carouselContainer || carouselImages.length === 0) return;
      stopCarousel();
      carouselInterval = setInterval(() => {
        carouselImages[currentCarouselIndex].classList.remove('active');
        currentCarouselIndex = (currentCarouselIndex + 1) % carouselImages.length;
        carouselImages[currentCarouselIndex].classList.add('active');
      }, 4000);
      console.log("Carousel started.");
    }
    function stopCarousel() {
      clearInterval(carouselInterval);
    }
    function setupScrollButton() {
      if (!scrollDownButton || !filterSearchControls) return;
      scrollDownButton.addEventListener('click', () => {
        filterSearchControls.scrollIntoView({
          behavior: 'smooth',
          block: 'start'
        });
      });
      const observerOptions = {
        root: null,
        rootMargin: '0px',
        threshold: 0.1
      };
      const observerCallback = (entries) => {
        entries.forEach(entry => {
          if (!entry.isIntersecting) {
            scrollDownButton.classList.add('visible');
          } else {
            scrollDownButton.classList.remove('visible');
          }
        });
      };
      const observer = new IntersectionObserver(observerCallback, observerOptions);
      observer.observe(filterSearchControls);
      setTimeout(() => {
        if (window.innerWidth <= 768) {
          const initialRect = filterSearchControls.getBoundingClientRect();
          if (initialRect.top < window.innerHeight && initialRect.bottom >= 0) {
            scrollDownButton.classList.remove('visible');
          } else {
            scrollDownButton.classList.add('visible');
          }
        } else {
          scrollDownButton.classList.remove('visible');
        }
      }, 100);
    }
    window.addEventListener('scroll', handleScroll);
    closeModalButton.addEventListener('click', closeModal);
    prevVideoButton.addEventListener('click', showPreviousVideo);
    nextVideoButton.addEventListener('click', showNextVideo);
    videoModal.addEventListener('click', (event) => {
      if (event.target === videoModal) {
        closeModal();
      }
    });
    document.addEventListener('DOMContentLoaded', () => {
      loadMoreVideos();
      startCarousel();
      calculateStickyHeaderOffset();
      setupScrollButton();
    });
  </script>

</body>

</html>













